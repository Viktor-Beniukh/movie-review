{% load custom_filter %}

{% if movie.avg_rating %}
  <li class="list-group-item">
    {% with avg_rating=movie.avg_rating|floatformat:0 %}
      {% with rating_plus_one=avg_rating|add:"1"|floatformat:0|convert_to_int %}
        {% for i in "12345" %}
          {% if i|add:"1"|convert_to_int <= rating_plus_one %}
            <span class="fa fa-star" aria-hidden="true"></span>
          {% else %}
            <span class="fa fa-star-o" aria-hidden="true"></span>
          {% endif %}
        {% endfor %}
      {% endwith %}
    {% endwith %}
  </li>
{% else %}
  <li class="list-group-item">
    <span class="fa fa-star-o" aria-hidden="true"></span>
    <span class="fa fa-star-o" aria-hidden="true"></span>
    <span class="fa fa-star-o" aria-hidden="true"></span>
    <span class="fa fa-star-o" aria-hidden="true"></span>
    <span class="fa fa-star-o" aria-hidden="true"></span>
  </li>
{% endif %}
